<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python æœŸæœ«éš¨æ©Ÿé¡Œåº«ç³»çµ±</title>
    <style>
        :root {
            --bg-color: #1e1e2e;
            --card-bg: #2a2a3c;
            --text-color: #cdd6f4;
            --accent-color: #f5c2e7; /* Pinkish */
            --highlight: #cba6f7;
            --success: #a6e3a1;
            --error: #f38ba8;
            --button-bg: #89b4fa;
            --button-text: #1e1e2e;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .header-area {
            text-align: center;
            margin-bottom: 20px;
        }

        h1 { color: var(--accent-color); margin-bottom: 5px; }
        
        .controls {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .refresh-btn {
            background-color: var(--highlight);
            color: var(--button-text);
            padding: 10px 20px;
            border-radius: 25px;
            border: none;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 0 15px rgba(203, 166, 247, 0.4);
            transition: transform 0.2s;
        }

        .refresh-btn:hover { transform: scale(1.05); }

        .container { max-width: 800px; width: 100%; }

        .card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid var(--accent-color);
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tag {
            font-size: 0.75em;
            background-color: #45475a;
            padding: 2px 8px;
            border-radius: 4px;
            margin-right: 5px;
            color: #fab387;
        }

        code {
            background-color: #11111b;
            padding: 2px 5px;
            border-radius: 4px;
            font-family: 'Consolas', monospace;
            color: #f9e2af;
        }

        pre {
            background-color: #11111b;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            color: #f9e2af;
            border: 1px solid #45475a;
        }

        input[type="text"], textarea {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border-radius: 6px;
            border: 1px solid #45475a;
            background-color: #313244;
            color: white;
            font-family: 'Consolas', monospace;
            box-sizing: border-box;
        }

        .btn-group button {
            background-color: var(--button-bg);
            color: var(--button-text);
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            margin-right: 10px;
        }

        .btn-group button.show-ans { background-color: #45475a; color: #fff; }

        .feedback-area {
            margin-top: 10px;
            padding: 10px;
            border-radius: 6px;
            display: none;
        }
        
        .answer-box {
            margin-top: 10px;
            padding: 15px;
            background-color: #181825;
            border-radius: 6px;
            display: none;
            border-left: 3px solid #f9e2af;
        }
    </style>
</head>
<body>

    <div class="header-area">
        <h1>ğŸ² Python æœŸæœ«éš¨æ©Ÿé¡Œåº«</h1>
        <p>æ¯æ¬¡é»æ“Šã€Œæ›ä¸€çµ„é¡Œç›®ã€ï¼Œéš¨æ©ŸæŠ½å– 8 é¡Œé€²è¡Œç·´ç¿’</p>
        <div class="controls">
            <button class="refresh-btn" onclick="generateNewQuiz()">ğŸ”„ æ›ä¸€çµ„é¡Œç›® (Refresh)</button>
        </div>
    </div>

    <div class="container" id="quiz-container">
        </div>

    <script>
        // ==========================================
        // æ ¸å¿ƒé¡Œåº« (Data Source) - é€™è£¡å¯ä»¥ç„¡é™æ“´å……
        // ==========================================
        const questionBank = [
            // --- Ch1-3 åŸºç¤ & é‹ç®— ---
            {
                tags: ["Ch2", "åŸºç¤"],
                type: "å¡«ç©º",
                q: "Python ä¸­è¨ˆç®—ã€Œæ•´æ•¸é™¤æ³•ã€ï¼ˆå–å•†æ•¸ï¼‰çš„é‹ç®—å­æ˜¯ï¼Ÿ",
                code: "print(10 ___ 3) # çµæœç‚º 3",
                ans: ["//"],
                exp: "// æ˜¯æ•´æ•¸é™¤æ³•ï¼Œ% æ˜¯å–é¤˜æ•¸ã€‚"
            },
            {
                tags: ["Ch2", "åŸºç¤"],
                type: "å¡«ç©º",
                q: "è¨ˆç®— 5 çš„ 3 æ¬¡æ–¹ã€‚",
                code: "x = 5 ___ 3",
                ans: ["**"],
                exp: "** ä»£è¡¨æ¬¡æ–¹é‹ç®—ã€‚"
            },
            {
                tags: ["Ch2", "è¼¸å‡º"],
                type: "å¡«ç©º",
                q: "print å‡½æ•¸é è¨­æ›è¡Œï¼Œè‹¥è¦æ”¹ç‚ºä¸æ›è¡Œä¸¦ä»¥ç©ºç™½çµå°¾ï¼Œéœ€è¨­å®šå“ªå€‹åƒæ•¸ï¼Ÿ",
                code: "print('Hello', ___=' ')",
                ans: ["end"],
                exp: "end åƒæ•¸é è¨­ç‚º '\n'ï¼Œè¨­ç‚º '' æˆ– ' ' å¯ä¸æ›è¡Œã€‚"
            },
            
            // --- Ch6 ä¸²åˆ— List ---
            {
                tags: ["Ch6", "List"],
                type: "å¡«ç©º",
                q: "å–å¾—ä¸²åˆ— my_list çš„é•·åº¦ï¼ˆå…ƒç´ å€‹æ•¸ï¼‰ã€‚",
                code: "length = ___(my_list)",
                ans: ["len"],
                exp: "len() å‡½æ•¸å¯ç”¨æ–¼å­—ä¸²ã€ä¸²åˆ—ã€å­—å…¸ç­‰ã€‚"
            },
            {
                tags: ["Ch6", "List"],
                type: "å¡«ç©º",
                q: "ç§»é™¤ä¸²åˆ—ä¸­æŒ‡å®šçš„å…ƒç´ å€¼ï¼ˆä¾‹å¦‚ç§»é™¤ç¬¬ä¸€å€‹å‡ºç¾çš„ 5ï¼‰ã€‚",
                code: "nums = [1, 5, 2, 5]\nnums.____(5)",
                ans: ["remove"],
                exp: "remove(x) ç§»é™¤ç¬¬ä¸€å€‹å€¼ç‚º x çš„å…ƒç´ ï¼›pop() å‰‡æ˜¯ä¾ç´¢å¼•ç§»é™¤ã€‚"
            },
            {
                tags: ["Ch6", "List"],
                type: "é™¤éŒ¯",
                q: "é€™è¡Œç¨‹å¼ç¢¼æƒ³åœ¨ç´¢å¼• 1 çš„ä½ç½®æ’å…¥æ•¸å­— 99ï¼Œèªæ³•æœ‰èª¤ã€‚",
                code: "my_list = [10, 20]\nmy_list.add(1, 99)",
                ans: ["my_list.insert(1, 99)"],
                exp: "List æ²’æœ‰ add æ–¹æ³•ï¼Œæ’å…¥è¦ç”¨ insert(index, value)ã€‚"
            },
            {
                tags: ["Ch6", "Slicing"],
                type: "å¡«ç©º",
                q: "å–å‡ºä¸²åˆ—çš„å‰ä¸‰å€‹å…ƒç´ ã€‚",
                code: "items = [1, 2, 3, 4, 5]\nsub = items[____]",
                ans: [":3", "0:3"],
                exp: "åˆ‡ç‰‡èªæ³• [start:end]ï¼Œä¸å« endã€‚"
            },

            // --- Ch7 è¿´åœˆ Loop ---
            {
                tags: ["Ch7", "Loop"],
                type: "å¡«ç©º",
                q: "range å‡½æ•¸ç”¢ç”Ÿ 0 åˆ° 4 çš„æ•¸å­—ã€‚",
                code: "for i in range(____):",
                ans: ["5"],
                exp: "range(n) æœƒç”¢ç”Ÿ 0 åˆ° n-1ã€‚"
            },
            {
                tags: ["Ch7", "Loop"],
                type: "å¡«ç©º",
                q: "å¼·åˆ¶ã€Œè·³å‡ºã€ä¸¦çµæŸæ•´å€‹è¿´åœˆçš„é—œéµå­—ã€‚",
                code: "while True:\n    if x > 10: ____",
                ans: ["break"],
                exp: "break çµæŸè¿´åœˆï¼›continue è·³éæœ¬æ¬¡è¿­ä»£ã€‚"
            },
             {
                tags: ["Ch7", "Loop"],
                type: "å¯¦ä½œ",
                q: "å¯«ä¸€å€‹è¿´åœˆè¨ˆç®— 1 åŠ åˆ° 10 çš„ç¸½å’Œã€‚",
                code: "# è«‹å¯«å‡ºå®Œæ•´è¿´åœˆ",
                ans: ["total = 0\nfor i in range(1, 11):\n    total += i\nprint(total)"],
                isCode: true,
                exp: "ä½¿ç”¨ range(1, 11) åŒ…å« 1 ä¸åŒ…å« 11ï¼Œç´¯åŠ è®Šæ•¸éœ€å…ˆåˆå§‹åŒ–ã€‚"
            },

            // --- Ch9 å­—å…¸ Dictionary ---
            {
                tags: ["Ch9", "Dict"],
                type: "å¡«ç©º",
                q: "å–å¾—å­—å…¸æ‰€æœ‰çš„ Keyï¼ˆéµï¼‰ã€‚",
                code: "d = {'a': 1, 'b': 2}\nkeys = d.____()",
                ans: ["keys"],
                exp: "d.keys() å›å‚³éµï¼Œd.values() å›å‚³å€¼ã€‚"
            },
            {
                tags: ["Ch9", "Dict"],
                type: "å¡«ç©º",
                q: "å®‰å…¨åœ°å–å¾—å­—å…¸çš„å€¼ï¼Œå¦‚æœ Key ä¸å­˜åœ¨å‰‡å›å‚³ Noneï¼ˆä¸æœƒå ±éŒ¯ï¼‰ã€‚",
                code: "val = my_dict.____('key_name')",
                ans: ["get"],
                exp: "dict['key'] è‹¥ä¸å­˜åœ¨æœƒå ±éŒ¯ï¼Œdict.get('key') å‰‡å›å‚³ None æˆ–é è¨­å€¼ã€‚"
            },

            // --- Ch11 å‡½æ•¸ Function ---
            {
                tags: ["Ch11", "Func"],
                type: "å¡«ç©º",
                q: "å®šç¾©å‡½æ•¸æ™‚ï¼Œç”¨ä¾†å›å‚³çµæœçµ¦å‘¼å«è€…çš„é—œéµå­—ã€‚",
                code: "def add(a, b):\n    ____ a + b",
                ans: ["return"],
                exp: "æ²’æœ‰ return çš„å‡½æ•¸é è¨­å›å‚³ Noneã€‚"
            },
            {
                tags: ["Ch11", "Lambda"],
                type: "å¯¦ä½œ",
                q: "ä½¿ç”¨ map å’Œ lambda å°‡ä¸²åˆ— [1, 2, 3] çš„æ¯å€‹å…ƒç´ å¹³æ–¹ã€‚",
                code: "nums = [1, 2, 3]\nresult = list(map(__________))",
                ans: ["lambda x: x**2, nums"],
                isCode: true,
                exp: "map(func, iterable)ã€‚Lambdaå¯«æ³•ï¼šlambda x: x**2ã€‚"
            },
            {
                tags: ["Ch11", "Args"],
                type: "å¡«ç©º",
                q: "å®šç¾©å‡½æ•¸æ™‚ï¼Œè‹¥è¦æ¥æ”¶ã€Œä»»æ„æ•¸é‡ã€çš„ä½ç½®åƒæ•¸(Tupleå½¢å¼)ï¼Œè¦åŠ ä»€éº¼ç¬¦è™Ÿï¼Ÿ",
                code: "def my_func(____args):",
                ans: ["*"],
                exp: "*args æ¥æ”¶ä»»æ„æ•¸é‡åƒæ•¸è½‰ç‚º Tupleï¼›**kwargs æ¥æ”¶é—œéµå­—åƒæ•¸è½‰ç‚º Dictionaryã€‚"
            },
             {
                tags: ["Ch9", "Set"],
                type: "å¡«ç©º",
                q: "å°‡ä¸²åˆ—è½‰ç‚ºã€Œé›†åˆã€ä»¥å»é™¤é‡è¤‡å…ƒç´ ã€‚",
                code: "lst = [1, 2, 2, 3]\nunique = ____(lst)",
                ans: ["set"],
                exp: "set() æœƒå»ºç«‹é›†åˆï¼Œé›†åˆç‰¹æ€§æ˜¯ä¸åŒ…å«é‡è¤‡å…ƒç´ ã€‚"
            }
        ];

        // ==========================================
        // ç³»çµ±é‚è¼¯ (System Logic)
        // ==========================================
        
        // æ´—ç‰Œæ¼”ç®—æ³• (Fisher-Yates Shuffle)
        function shuffleArray(array) {
            let currentIndex = array.length, randomIndex;
            // ç•¶é‚„æœ‰å…ƒç´ æœªæ´—ç‰Œæ™‚
            while (currentIndex != 0) {
                // éš¨æ©Ÿé¸ä¸€å€‹
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                // äº¤æ›
                [array[currentIndex], array[randomIndex]] = [
                    array[randomIndex], array[currentIndex]];
            }
            return array;
        }

        function generateNewQuiz() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = ''; // æ¸…ç©ºèˆŠé¡Œç›®

            // 1. è¤‡è£½é¡Œåº«ä¸¦æ´—ç‰Œ
            const shuffled = shuffleArray([...questionBank]);
            
            // 2. å–å‡ºå‰ 8 é¡Œ (æ•¸é‡å¯è‡ªå·±æ”¹)
            const selectedQuestions = shuffled.slice(0, 8);

            // 3. æ¸²æŸ“ç•«é¢
            selectedQuestions.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                
                // æ¨™ç±¤ç”Ÿæˆ
                const tagsHtml = item.tags.map(t => `<span class="tag">${t}</span>`).join('');
                
                // ç¨‹å¼ç¢¼å€å¡Š
                const codeHtml = item.code ? `<pre>${item.code}</pre>` : '';

                // è¼¸å…¥æ¡† (ä¸€èˆ¬ vs å¯¦ä½œ)
                let inputHtml = '';
                if (item.isCode) {
                    inputHtml = `<textarea rows="3" id="q-${index}" placeholder="åœ¨æ­¤è¼¸å…¥ç¨‹å¼ç¢¼..."></textarea>`;
                } else {
                    inputHtml = `<input type="text" id="q-${index}" placeholder="ä½ çš„ç­”æ¡ˆ">`;
                }

                card.innerHTML = `
                    <div style="margin-bottom:10px;">${tagsHtml} <span style="color:#6c7086; font-size:0.9em;">Question ${index + 1}</span></div>
                    <h3 style="margin-top:0;">${item.q}</h3>
                    ${codeHtml}
                    ${inputHtml}
                    <div class="btn-group">
                        <button onclick="checkOne(${index}, '${item.ans[0]}', ${item.isCode || false})">æª¢æŸ¥ Vibe</button>
                        <button class="show-ans" onclick="document.getElementById('ans-${index}').style.display='block'">çœ‹ç­”æ¡ˆ</button>
                    </div>
                    <div id="fb-${index}" class="feedback-area"></div>
                    <div id="ans-${index}" class="answer-box">
                        <strong>åƒè€ƒç­”æ¡ˆï¼š</strong> <code>${item.ans[0]}</code><br>
                        <small style="color:#aaa;">${item.exp}</small>
                    </div>
                `;
                container.appendChild(card);
            });

            // æ»¾å‹•åˆ°é ‚éƒ¨
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function checkOne(idx, correctAns, isCode) {
            const userIn = document.getElementById(`q-${idx}`).value.trim();
            const fb = document.getElementById(`fb-${idx}`);
            
            fb.style.display = 'block';

            if (isCode) {
                // å¯¦ä½œé¡Œä¸åš´æ ¼æª¢æŸ¥ï¼Œåªç¢ºèªæœ‰ç„¡è¼¸å…¥
                if (userIn.length > 3) {
                    fb.style.backgroundColor = 'rgba(166, 227, 161, 0.2)';
                    fb.style.color = 'var(--success)';
                    fb.innerText = "Looks good! è«‹å°ç…§ç­”æ¡ˆç¢ºèªé‚è¼¯ã€‚";
                } else {
                    fb.style.backgroundColor = 'rgba(243, 139, 168, 0.2)';
                    fb.style.color = 'var(--error)';
                    fb.innerText = "å¯«é»æ±è¥¿å§ï¼Empty code is no vibe.";
                }
                return;
            }

            // ä¸€èˆ¬é¡Œç›®çš„ç°¡æ˜“æª¢æŸ¥ (åŒ…å«å³å¯)
            if (userIn === correctAns || userIn.includes(correctAns)) {
                fb.style.backgroundColor = 'rgba(166, 227, 161, 0.2)';
                fb.style.color = 'var(--success)';
                fb.innerHTML = "âœ¨ Correct! Vibe check passed.";
            } else {
                fb.style.backgroundColor = 'rgba(243, 139, 168, 0.2)';
                fb.style.color = 'var(--error)';
                fb.innerHTML = "âŒ æ²’é—œä¿‚ï¼Œå†è©¦ä¸€æ¬¡æˆ–ç›´æ¥çœ‹ç­”æ¡ˆã€‚";
            }
        }

        // åˆå§‹åŒ–é é¢æ™‚å…ˆç”¢ç”Ÿä¸€çµ„
        generateNewQuiz();
    </script>
</body>
</html>
